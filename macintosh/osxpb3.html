<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML>  <HEAD><LINK rel="canonical" href="//blog.barijaona.com/macintosh/osxpb3.html">    <META name="generator" content="HTML Tidy, see www.w3.org">    <META http-equiv="content-type" content=    "text/html;charset=iso-8859-1">    <META name="generator" content="GoLive CyberStudio 3">    <TITLE>MacOS X Public Beta : les shells (suite)</TITLE>    <META name="DESCRIPTION" content=    "Utilisation du shell zsh, premiers pas">    <META name="keywords" content=    "macintosh, osx, terminal, zsh, bash, shell, commandes, unix">    <META http-equiv="lang" content="fr">    <LINK href="../style/barijaona.css" rel="styleSheet" type=    "text/css">  </HEAD>  <BODY bgcolor="white">    <!--#geoguide-->    <TABLE border="0" cellspacing="0" width="100%" frame="void"    rules="cols" summary="Menus">      <COLGROUP>        <COL span="6" width="1*">      </COLGROUP>      <TR align="center">        <TD bgcolor="#ffcccc"><A href="../" class="menu"        title="Les &eacute;ditoriaux">Accueil</A></TD>        <TD bgcolor="#ccffcc"><A href="../humour/" title=        "Et vous trouvez &ccedil;a dr&ocirc;le ?" class="menu">        Humour</A></TD>        <TD bgcolor="#ccccff"><A href="../macintosh/" title=        "Mac Pride" class="menu">Macintosh</A></TD>        <TD bgcolor="#ffffcc"><A href="../print66/" title=        "A free printer daemon for the Macintosh" class="menu">        Print66</A></TD>        <TD bgcolor="#ffccff"><A href="../best_of/" title=        "Sites Web, photos..." class="menu">        S&eacute;lection</A></TD>        <TD bgcolor="#ccffff"><A href="../equipe/" title=        "Qui &eacute;crit ce machin ?" class="menu">        &Eacute;diteur</A></TD>      </TR>      <TR bgcolor="#ccccff">        <TD colspan="6" align="left">&nbsp;&nbsp;<A href=        "index.html" class="submenu">MacOS X</A>&nbsp;|&nbsp;<A        href="os8et9.html" class="submenu">MacOS        classique</A>&nbsp;|&nbsp;<A href="macrules.html" class=        "submenu">Pourquoi ?</A></TD>      </TR>    </TABLE>    <TABLE width="100%" bgcolor="white" border="0" cellspacing="0"    cellpadding="15" frame="void" rules="cols" summary="contenu">      <COLGROUP>        <COL span="1" width="1*">      </COLGROUP>      <TR>        <TD align="right"><SPAN class="scrollmenu">Cet        &eacute;l&eacute;ment comporte 5 parties :</SPAN> &nbsp; <A        href="index.html" class="scrollmenu">        Intro</A>&nbsp;|&nbsp;<A href="osxpb1.html" class=        "scrollmenu">1</A>&nbsp;|<A href="osxpb2.html" class=        "scrollmenu">2</A>&nbsp;|&nbsp; <SPAN class="scrollmenu">        3</SPAN>&nbsp;|&nbsp;<A href="osxpb4.html" class=        "scrollmenu">4</A>&nbsp;|&nbsp;<A href="osxpb2.html" class=        "scrollmenu">&lt;&lt; Pr&eacute;c</A>&nbsp;|&nbsp;<A href=        "osxpb4.html" class="scrollmenu">Suiv &gt;&gt;</A></TD>      </TR>      <TR>        <TD>          <H2>Personnalisation de zsh</H2>          <P><VAR>Tcsh</VAR> est je l'ai dit le shell          propos&eacute; par d&eacute;faut par l'application          Terminal. Cette option prise par Apple pour un shell dit          de type "C" est susceptible de provoquer un certain          nombre de guerres de religions... Disons que beaucoup de          monde pr&eacute;f&egrave;re les shells de type "Bourne",          et que du fait que Linux utilise par d&eacute;faut le          shell<VAR>bash</VAR>, beaucoup se sentiront sans doute          plus &agrave; l'aise en se retrouvant face &agrave; un          environnement de ce type...</P>          <P>On peut installer <VAR>bash</VAR> sur MacOS X, mais          franchement cela me parait beaucoup de travail pour pas          grand chose, car MacOS X est &eacute;galement          livr&eacute; avec <VAR>zsh</VAR>, qui est au moins aussi          int&eacute;ressant que <VAR>bash</VAR> et lui ressemble          fortement... Seul probl&egrave;me, <VAR>zsh</VAR> est          livr&eacute; dans MacOS X Beta assez brut de fonderie, et          le travail de personnalisation est donc encore plus          n&eacute;cessaire que pour <VAR>tcsh</VAR>. Dans votre          r&eacute;pertoire <VAR>~          (/Users/votre_nom_utilisateur)</VAR>, vous pourrez          installer un fichier <VAR>.zprofile</VAR> qui pourrait          avoir la t&ecirc;te ci-apr&egrave;s :</P>          <TABLE align="center" width="95%" cellspacing="0" border=          "1" summary=          "Exemple de script de personnalisation de zsh">            <CAPTION align="bottom">              Exemple de fichier <VAR>~/.zprofile</VAR>            </CAPTION>            <COLGROUP>              <COL span="1" width="1*">            </COLGROUP>            <TR>              <TD><CODE>#<BR>               # $HOME/.zprofile<BR>               #<BR>              <BR>               HISTFILE=~/.zsh_history<BR>               SAVEHIST=30<BR>              <BR>               PS1="[%m:%3c] %n%# "<BR>              <BR>               alias edit="pico"<BR>               alias type="less -E"<BR>               function dir() { ls -lgAF "$@" | more ;}<BR>              <BR>               PATH="~:~/bin:/usr/local/bin:/usr/bin/:/bin:\/usr/local/sbin:/usr/sbin:/sbin"<BR>              </CODE> </TD>            </TR>          </TABLE>          <P>J'y d&eacute;finis un fichier historique qui me permet          de sauvegarder les commandes pr&eacute;c&eacute;dentes          avec les touches fl&eacute;ch&eacute;es du clavier.</P>          <P><VAR>PS1</VAR> est le prompt affich&eacute; par le          shell. Pour plus de d&eacute;tails sur <VAR>PS1</VAR>,          utilisez la commande <KBD>man zshparam</KBD>.</P>          <P>La commande <VAR>alias</VAR> a une syntaxe          diff&eacute;rente de celle de tcsh.</P>          <P>Pour d&eacute;finir la pseudo-commande "dir", je suis          oblig&eacute; de d&eacute;finir une fonction pour passer          le param&egrave;tre (les noms de fichiers) au bon          endroit...</P>          <P>Enfin, je d&eacute;finis le chemin d'acc&egrave;s par          d&eacute;faut...</P>          <P>Pour que votre shell au lancement de Terminal soit          <VAR>zsh</VAR>, il vous faut modifier vos          pr&eacute;f&eacute;rences dans Terminal pour indiquer          comme shell <KBD>/bin/zsh</KBD>.</P>          <P>Lorsque tout est au point, utilisez l'application          <VAR>NetInfoManager</VAR> (install&eacute;e dans le          r&eacute;pertoire <VAR>/Applications/Utilities</VAR>) :          en suivant le chemin <VAR>          /users/votre_nom_utilisateur</VAR>, modifiez la          propri&eacute;t&eacute; shell pour mettre <KBD>          /bin/zsh</KBD> au lieu de <KBD>/bin/tcsh</KBD>... Vous          serez ainsi s&ucirc;r de tomber sur le bon shell          m&ecirc;me si vous n'utilisez par Terminal.</P>          <P>Au passage, notez que NetInfoManager est          extr&ecirc;mement important pour la configuration de          MacOS X. Commencez par regarder ce qu'il y a l&agrave;          avant de faire ce que la litt&eacute;rature sur les Unix          BSD recommande de faire...</P>          <H2>Le 1% vraiment n&eacute;cessaire pour survivre avec          les shells</H2>          <P>Le probl&egrave;me, c'est que DOS est un faux ami de          Unix (en fait, c'est une tr&egrave;s mauvaise imitation).          Donc, on risque d'utiliser la syntaxe de l'un pour          l'autre. Les alias d&eacute;finis pr&eacute;cedemment          &eacute;viteront les lapsus les plus fr&eacute;quents.          Pour le reste, apprenez tout de suite les          &eacute;quivalences... Pour en savoir plus, utilisez la          commande man</P>          <TABLE cellpadding="0" border="1" width="95%"          cellspacing="0" align="center" summary=          "&Eacute;quivalences">            <COLGROUP>              <COL span="2" width="1*">            </COLGROUP>            <CAPTION align="bottom">              &Eacute;quivalences MS/DOS et Unix            </CAPTION>            <TR>              <TH>MS-DOS</TH>              <TH>Unix</TH>            </TR>            <TR>              <TD><CODE>COPY</CODE></TD>              <TD><CODE>cp</CODE></TD>            </TR>            <TR>              <TD><CODE>DEL</CODE></TD>              <TD><CODE>rm</CODE></TD>            </TR>            <TR>              <TD><CODE>DELTREE</CODE></TD>              <TD><CODE>rm -rf</CODE></TD>            </TR>            <TR>              <TD><CODE>MOVE</CODE></TD>              <TD><CODE>mv</CODE></TD>            </TR>            <TR>              <TD><CODE>REN</CODE></TD>              <TD><CODE>mv</CODE></TD>            </TR>            <TR>              <TD><CODE>DIR fichier /S</CODE></TD>              <TD><CODE>find . -name fichier</CODE></TD>            </TR>            <TR>              <TD><CODE>MD</CODE></TD>              <TD><CODE>mkdir</CODE></TD>            </TR>            <TR>              <TD><CODE>RD</CODE></TD>              <TD><CODE>rmdir</CODE></TD>            </TR>          </TABLE>          <P>Si un nom de fichier contient des espaces, l'entourez          de guillemets (")</P>          <P>Redirections et combinaisons : <KBD>&gt; &lt; &gt;&gt;          |</KBD></P>          <P>Jokers : <KBD>* ?</KBD></P>          <H2>Quelques plus</H2>          <P>Unix a le joker [ ]. Utilisez :</P>          <UL>            <LI><KBD>[abc]*</KBD> pour d&eacute;signer tous les            fichiers dont le nom commence par a, b ou c,</LI>            <LI><KBD>*[I-N,1,2,3]</KBD> pour d&eacute;signer tous            les fichiers dont le nom finit par I, J, K, L, M, N, 1,            2 ou 3.</LI>          </UL>          <P>La touche TAB permet d'abr&eacute;ger la frappe d'une          commande. Essayez, c'est presque magique...</P>          <P><KBD>su</KBD> vous permet d'ouvrir une session sans          quitter celle en cours. Ex : <KBD>su root</KBD>. Pour          fermer une session : <KBD>exit</KBD></P>          <P><KBD>open</KBD> vous permet d'ouvrir un fichier comme          si on l'avait double-cliqu&eacute; dans l'interface          graphique. Ex : <KBD>open          /Applications/TextEdit.app</KBD></P>        </TD>      </TR>      <TR>        <TD align="right"><SPAN class="scrollmenu">Cet        &eacute;l&eacute;ment comporte 5 parties :</SPAN> &nbsp; <A        href="index.html" class="scrollmenu">        Intro</A>&nbsp;|&nbsp;<A href="osxpb1.html" class=        "scrollmenu">1</A>&nbsp;|<A href="osxpb2.html" class=        "scrollmenu">2</A>&nbsp;|&nbsp; <SPAN class="scrollmenu">        3</SPAN>&nbsp;|&nbsp;<A href="osxpb4.html" class=        "scrollmenu">4</A>&nbsp;|&nbsp;<A href="osxpb2.html" class=        "scrollmenu">&lt;&lt; Pr&eacute;c</A>&nbsp;|&nbsp;<A href=        "osxpb4.html" class="scrollmenu">Suiv &gt;&gt;</A></TD>      </TR>    </TABLE>    <TABLE border="0" cellspacing="0" cellpadding="0" width="100%"    frame="void" rules="cols" summary="Sous-menu de navigation">      <TR bgcolor="#ccccff">        <TD colspan="6" align="left">&nbsp;&nbsp;<A href=        "index.html" class="submenu">MacOS X</A>&nbsp;|&nbsp;<A        href="os8et9.html" class="submenu">MacOS        classique</A>&nbsp;|&nbsp;<A href="macrules.html" class=        "submenu">Pourquoi ?</A></TD>      </TR>    </TABLE>  </BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
<head><link rel="canonical" href="http://blog.barijaona.com/web/commentaires_ajah.html">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<title>En ce nouvel an, on lave plus blanc... : Quai Sud, 2 minutes d'arrêt</title>
<meta name="DESCRIPTION" content="Expérimentations et mésaventures technologiques" />
<meta name="keywords" content="blosxom, print66, lpd, weblog" />
<meta name="ICBM" content="-18.9079, 47.5333" /> 
<meta name="geo.region" content="MG-T" /> 

<link rel="styleSheet" type="text/css" href="http://blog.barijaona.com/style/barijaona5.css" />
<link rel="styleSheet" type="text/css" href="http://blog.barijaona.com/style/theme4.css" />
<link rel="styleSheet" type="text/css" media="screen" href="http://blog.barijaona.com/style/screenlayout5.css" />
<link rel="styleSheet" type="text/css" media="screen" href="http://blog.barijaona.com/style/code.css" />
<link rel="stylesheet" media="print" type="text/css" href="http://blog.barijaona.com/style/print.css" />
<link rel="prev" href="http://blog.barijaona.com/musique/wir-sind-wir.html" title="Et nous, où en sommes nous ?" />
<script type="text/javascript" src="http://blog.barijaona.com/style/haloscan3.js"></script>
<script type="text/javascript" src="http://www.haloscan.com/load.php?user=barijaona"></script><script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-598147-1";
urchinTracker();
</script>
</head>
<body>
<div class="contentwrapper"><div class="content"><h1>Quai Sud, 2 minutes d'arrêt</h1><em>Ahanements d'octets austraux</em><br /><br /><h2 class="dateofday"><a name="0113"></a>dimanche 13 janvier 2008</h2>
<div class="post"><div class="post-full"><h3 class="accent4"><span class="timestamp"><a href="http://blog.barijaona.com/web/commentaires_ajah.html" rel="bookmark" title="Lien permanent vers cet article">[&nbsp;00:46&nbsp;]</a></span>&nbsp;En ce nouvel an, on lave plus blanc...</h3><p>C'est encore l'époque des cadeaux, donc qu'est ce qu'on pouvait bien donner en ce nouvel an à des gens situés parfois à l'autre bout de la planète ?</p>

<p>Des souhaits de bonne humeur certes pour les lecteurs les plus fidèles (une bonne année, quoi !), mais des geekeries c'était quand même un peu plus concret...</p>

<p>Donc on s'y est mis, avec prise de tête et tout et tout...</p>

<p>Cela faisait un certain temps que je trouvais les possibilités d'Haloscan un brin primitives et que j'enviais la page d'accueil d'<a href="http://embruns.net" title="Laurent Gloaguen">Embruns</a>. Un accès plus direct aux commentaires, cela favorise quand même l'interactivité avec le lecteur...</p>

<p>Et comme Laurent avait testé <a href="http://embruns.net/logbook/2007/09/20.html#005661" title="Ahah, je ris">de nouveaux joujoux</a> (non, je ne me référais pas à certains envois récents par Chronopost...), l'envie de bidouiller m'a repris...</p>

<p>Les contraintes étaient nombreuses et relativement ardues :</p>

<ul>
<li>l'hébergement chez mac.com n'offre aucun langage de script coté serveur : ni PHP, ni Ruby, ni Python, ni Perl... Ouin !!!</li>
<li>le stock de commentaires antérieurs est chez Haloscan, et autant que faire se peut, je ne souhaitais pas changer...</li>
<li>cela nous amenait presque inévitablement à de la communication entre deux noms de domaines différents, et ça, en règle générale, c'est violemment prohibé par les navigateurs pour des raisons de sécurité...</li>
<li>tout récemment, Haloscan a avancé sur <a href="http://news.haloscan.com/2008/01/haloscan-introduces-in-line-comments.html" title="Haloscan Introduces In-line Comments" hreflang="en" >l'intégration de commentaires dans d'autres pages</a>, mais cela reste un bien primitif <code>document.write</code>, qui génére qui plus est un code HTML rempli de bugs... Pas de JSON, pas d'objet...</li>
<li>je n'avais pas envie de m'embarquer dans l'apprentissage d'énormes bibliothèques Javascript qui alourdiraient le temps de chargement des pages... La bande passante reste rare et chère par ici, nom d'un chien !</li>
<li>la compatibilité avec tous les navigateurs, même archaïques, et l'accessibilité devaient être absolument préservées. On a sa fierté, quand même !</li>
</ul>

<p>La solution est une combinaison d'<a href="http://developer.apple.com/internet/webcontent/iframe.html" title="Remote Scripting with IFRAME" hreflang="en"><code>IFRAME</code></a> et d'<a href="http://jimmyzimmerman.com/blog/2006/08/ajax-vs-ajah.html" title="Jimmy Z : AJAX vs AJAH" hreflang="en">AJAH (<i lang="en"><strong>A</strong>synchronous <strong>J</strong>avaScript <strong>A</strong>nd <strong>H</strong>TML)</i></a> dont je suis raisonnablement fier... La page d'accueil valide et fait sourire iCab, et même sous <a href="http://www.joyoftech.com/joyoftech/joyarchives/1052.html" title="The Joy Of Tech" hreflang="en">Internet Explorer 5 pour Macintosh</a>, la mise à jour dynamique fonctionne...</p>

<p>Quant aux navigateurs encore plus anciens ou ayant désactivé Javascript, ils continuent d'accéder aux commentaires par un lien classique...</p>

<p>Bien entendu, je compte sur mes lecteurs pour vérifier que tout fonctionne bien.  Je n'ai notamment pas d'Internet Explorer sous Windows sous la main... Quant aux plus geeks d'entre vous, ils pourront examiner le code mis en oeuvre.</p>
</div><div class="post-tools"><span class="timestamp">Dernière mise à jour :<br /> 13/1/2008 01:14</span><br /><span class="timestamp"><a href="http://www.haloscan.com/comments.php?user=barijaona&amp;comment=200801130046" onclick="getComment('200801130046'); return false;" title="Commentaires des lecteurs"><script type="text/javascript">
<!--
myCount('200801130046');
// -->
</script></a></span><noscript><p><a href="http://www.haloscan.com/comments.php?user=barijaona&amp;comment=200801130046" title="Commentaires des lecteurs">[Commentaire(s)]</a></p></noscript></div><div id="HSd200801130046"></div></div><br />


<br /><em>Billet classé dans la catégorie :</em> <a href="http://blog.barijaona.com/index.html">Accueil</a>&nbsp;&gt;&nbsp;<a href="http://blog.barijaona.com/web/index.html">Web</a>&nbsp;&gt;&nbsp;Commentaires Ajah
<br /><br /></div></div>

<div class="nav2">
<div class="box"><div class="search">
<form method="get" id="search" action="http://duckduckgo.com/">
<label for="motcle" accesskey="4">Rechercher dans le site</label>
<input type="text" name="q" id="motcle" maxlength="255" placeholder="mot(s) cl&eacute;(s)"/>
<input type="hidden" name="sites" value="barijaona.com"/>
<input type="hidden" name="kj" value="#7F7F7F"/>
<input type="submit" value="Rechercher" />
</form>
</div>

<br />
<span class="note">Les opinions traduites dans ces pages sont strictement personnelles et n'engagent que leur auteur.</span><br /></div>

<div class="box">
<script type="text/javascript"><!--
google_ad_client = "pub-1578620876183845";
google_ad_width = 120;
google_ad_height = 240;
google_ad_format = "120x240_as";
google_ad_type = "text";
google_ad_channel = "";
google_color_border = "CCCCCC";
google_color_bg = "CCCCCC";
google_color_link = "000000";
google_color_text = "333333";
google_color_url = "666666";
google_ui_features = "rc:0";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script><noscript></noscript>
</div>
</div>

<div class="contentfooter tableau"><div class="gauche"><a href="http://blog.barijaona.com/musique/wir-sind-wir.html" title="billet du 24 d&eacute;cembre 2007">&lt;-&nbsp;Et nous, où en sommes nous ?</a></div></div>

<div class="contentfooter">
<br />
<!-- Contrat Creative Commons -->
Certains droits protégés par <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/deed.fr">licence Creative Commons</a>
<!-- /Contrat Creative Commons -->


<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->, 2008 Barijaona Ramaholimihaso<br />Réagissez par les liens de commentaires ou par courriel : <a title="reactions" rel="barijaona.com" onclick="this.href='mailto:'+this.getAttribute('title')+'@'+this.getAttribute('rel')">reactions (arobace) barijaona.com</a>
</div>

<div class="topnav">
<span class="theme1">&nbsp;<a href="http://blog.barijaona.com/" title="Les éditoriaux" class="menu" accesskey="1">Accueil</a>&nbsp;</span>|<span class="theme2">&nbsp;
<a href="http://blog.barijaona.com/manala_azy/" title="Et vous trouvez ça drôle ?" class="menu">Humour</a>&nbsp;</span>|<span class="theme3">&nbsp;<a href="http://blog.barijaona.com/macintosh/" title="Paradis (?) ..." class="menu">Macintosh</a>&nbsp;</span>|<span class="theme4">&nbsp;<a href="http://blog.barijaona.com/web/" title="et enfers..." class="menu">Bidouilles</a>&nbsp;</span>|<span class="theme5">&nbsp;<a href="http://blog.barijaona.com/best_of/hotlist.html" title="Liens, blogroll..." class="menu">Sélection</a>&nbsp;</span>|<span class="theme6">&nbsp;<a href="http://blog.barijaona.com/equipe/equipe.html" title="Qui écrit ce machin ?" class="menu">Éditeur</a>&nbsp;</span><br />
<div class="nav1">&nbsp;<a href="http://blog.barijaona.com/web/" class="submenu" title="Historique des mutations du site">Carnet Web</a>&nbsp;|&nbsp;<a href="http://blog.barijaona.com/print66/" class="submenu" title="A freeware print daemon for Classical Macintosh" hreflang="en">Print66</a>&nbsp;|&nbsp;<a href="http://blog.barijaona.com/equipe/accessibilite.html" class="submenu" title="Charte d'accessibilité" accesskey="0">Accessibilité</a></div>
</div>
<iframe name="RSIFrame" style="width:0px; height:0px; border: 0px"></iframe>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript"><!--
_uacct = "UA-598147-1";
urchinTracker();
//-->
</script>
</body>
</html>
